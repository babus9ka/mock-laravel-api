# Развертывание проекта на Laravel в Docker

Этот проект использует Docker для простого и удобного развертывания Laravel-приложения. Следуйте шагам ниже, чтобы развернуть проект на своем локальном компьютере.

## Требования

- **Docker** (версии 19.03 и выше)
- **Docker Compose** (версия 1.25 и выше)

## Шаги для развертывания

1. **Клонируйте репозиторий**

   Если у вас еще нет репозитория проекта, клонируйте его:

   ```bash
   git clone https://github.com/babus9ka/mock-laravel-api.git
   cd mock-laravel-api
   ```

2. **Запуск Docker контейнеров**

   В корне проекта уже есть все необходимые файлы для Docker (например, `Dockerfile` и `docker compose.yml`).

   Запустите контейнеры с помощью Docker Compose:

   ```bash
   docker compose up -d
   ```

   Это создаст и запустит контейнеры для вашего проекта. После этого ваше приложение будет доступно по адресу `http://localhost:8876` (или по порту, указанному в конфигурации Docker).

3. **Установка зависимостей**

   После того как контейнеры будут запущены, необходимо выполнить установка зависимостей.

   Для этого выполните следующую команду:

   ```bash
   docker exec -it project_app composer install
   ```

4. **Настройка окружения**

    Создайте копию файла .env.example и назовите .env

    Выполните команду:
    ```bash
   docker exec -it project_app php artisan key:generate
   ```

   Далее необходимо дать доступ текущей директории:
    ```bash
   sudo chmod 777 -R ./
   ```
   
5. **Установка зависимостей**

   После того как контейнеры будут запущены, необходимо выполнить установка зависимостей.

   Для этого выполните следующую команду:

   ```bash
   docker exec -it project_app composer install
   ```


6. **Выполнение миграций базы данных**

   После того как контейнеры будут запущены, необходимо выполнить миграции для базы данных.

   Для этого выполните следующую команду:

   ```bash
   docker exec -it project_app php artisan migrate
   ```

   Это выполнит все миграции для вашего проекта.

7. **Запуск сидеров**

   После миграций можно запустить сидеры для наполнения базы данных тестовыми данными:

   ```bash
   docker exec project_app php artisan db:seed
   ```

   Это выполнит сидеры, которые наполнит вашу базу данных начальными данными.

8. **Доступ к приложению**

   После того как миграции и сидеры будут выполнены, вы можете открыть приложение в браузере. Обычно оно доступно по адресу:

   ```
   http://localhost:8876
   ```

   Однако, если в конфигурации Docker указаны другие порты, откройте приложение по нужному адресу.

## Команды для разработки

- **Просмотр Swagger UI:**

  ```
  http://localhost:8876/api/documentation
  ```

  API ключ по умолчанию: 'default-api-key'

- **Запуск контейнеров:**

  ```bash
  docker compose up -d
  ```

- **Остановка контейнеров:**

  ```bash
  docker compose down
  ```

- **Просмотр логов контейнера:**

  ```bash
  docker compose logs -f
  ```

- **Выполнение команд внутри контейнера:**

  Чтобы выполнить команду внутри контейнера, например, для выполнения команд Laravel, используйте:

  ```bash
  docker compose exec project_app <команда>
  ```

## Примечания

- Убедитесь, что у вас установлены все зависимости для работы с Docker.
- При необходимости, конфигурацию базы данных можно настроить в `.env` файле в проекте.
